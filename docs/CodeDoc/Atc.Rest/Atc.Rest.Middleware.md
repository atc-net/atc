<div style='text-align: right'>

[References](Index.md)&nbsp;&nbsp;-&nbsp;&nbsp;[References extended](IndexExtended.md)
</div>

# Atc.Rest.Middleware

<br />

## ExceptionTelemetryMiddleware
Middleware that tracks exceptions in Application Insights telemetry and returns a generic error response.
><b>Remarks:</b> This middleware captures unhandled exceptions from the pipeline, tracks them in Application Insights, and returns an HTTP 500 status with a user-friendly error message including the correlation ID.

>```csharp
>public class ExceptionTelemetryMiddleware
>```

### Methods

#### InvokeAsync
>```csharp
>Task InvokeAsync(HttpContext context)
>```
><b>Summary:</b> Invokes the middleware to process the HTTP request and track exceptions.
>
><b>Parameters:</b><br>
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`context`&nbsp;&nbsp;-&nbsp;&nbsp;The HTTP context.<br />
>
><b>Returns:</b> A task representing the asynchronous operation.

<br />

## KeepAliveMiddleware
Middleware that handles Azure App Service keep-alive pings to prevent false-negative health check reports.
><b>Remarks:</b> This middleware intercepts GET requests to the root path (/) and returns HTTP 200 OK immediately. This prevents Application Insights from reporting failed requests when Azure App Service performs keep-alive pings over HTTP instead of HTTPS.

>```csharp
>public class KeepAliveMiddleware
>```

### Methods

#### InvokeAsync
>```csharp
>Task InvokeAsync(HttpContext context)
>```
><b>Summary:</b> Invokes the middleware to process the HTTP request.
>
><b>Parameters:</b><br>
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`context`&nbsp;&nbsp;-&nbsp;&nbsp;The HTTP context.<br />
>
><b>Returns:</b> A task representing the asynchronous operation.

<br />

## RequestCorrelationMiddleware
Middleware that ensures correlation and request IDs are present in both request and response headers.
><b>Remarks:</b> This middleware manages the x-correlation-id and x-request-id headers, generating new GUIDs if not provided. These headers are essential for distributed tracing and request tracking across microservices.

>```csharp
>public class RequestCorrelationMiddleware
>```

### Methods

#### InvokeAsync
>```csharp
>Task InvokeAsync(HttpContext context)
>```
><b>Summary:</b> Invokes the middleware to ensure correlation headers are set.
>
><b>Parameters:</b><br>
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`context`&nbsp;&nbsp;-&nbsp;&nbsp;The HTTP context.<br />
>
><b>Returns:</b> A task representing the asynchronous operation.

<br />

## RequestResponseLoggerMiddleware
Middleware that logs HTTP request and response details for debugging and monitoring purposes.
><b>Remarks:</b> This middleware captures request and response information including headers, query parameters, and body content. It supports configurable logging options through `Atc.Rest.Options.RequestResponseLoggerOptions`, such as: <list type="bullet"><item>Skipping Swagger and SignalR requests</item><item>Including/excluding query parameters, headers, and response body</item><item>Automatic redaction of binary content</item><item>Exception tracking</item></list> Binary content is replaced with "# BINARY-DATA-REDACTED #" to prevent large log entries.

>```csharp
>public class RequestResponseLoggerMiddleware
>```

### Methods

#### InvokeAsync
>```csharp
>Task InvokeAsync(HttpContext httpContext)
>```
><b>Summary:</b> Invokes the middleware to log request and response details.
>
><b>Parameters:</b><br>
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`httpContext`&nbsp;&nbsp;-&nbsp;&nbsp;The HTTP context.<br />
>
><b>Returns:</b> A task representing the asynchronous operation.
<hr /><div style='text-align: right'><i>Generated by MarkdownCodeDoc version 1.2</i></div>
